# This file was auto generated by Styx.
# Do not edit this file directly.

from styxdefs import *
import pathlib
import typing

DTIGEN_METADATA = Metadata(
    id="2ffe8781a0abbb56da46d18aa68a24c668a3a78c",
    name="dtigen",
    container_image_type="docker",
    container_image_index="index.docker.io",
    container_image_tag="mcin/docker-fsl:latest",
)


class DtigenOutputs(typing.NamedTuple):
    """
    Output object returned when calling `dtigen(...)`.
    """
    root: OutputPathType
    """Output root folder. This is the root folder for all outputs."""
    output_diffusion_data: OutputPathType
    """Output diffusion data"""
    output_kurtosis_map: OutputPathType | None
    """Mean kurtosis map"""


def dtigen(
    tensor: InputPathType,
    s0: InputPathType,
    output_data: str,
    bvecs: InputPathType,
    bvals: InputPathType,
    brainmask: InputPathType,
    kurtosis: InputPathType | None = None,
    help_: bool = False,
    runner: Runner | None = None,
) -> DtigenOutputs:
    """
    dtigen by FSL.
    
    Generate diffusion data using tensor model.
    
    Args:
        tensor: Input tensor file.
        s0: Input S0 file.
        output_data: Output data file.
        bvecs: bvecs ASCII text file.
        bvals: bvals ASCII text file.
        brainmask: Brain mask file.
        kurtosis: Mean kurtosis map.
        help_: Display help message.
        runner: Command runner.
    Returns:
        NamedTuple of outputs (described in `DtigenOutputs`).
    """
    runner = runner or get_global_runner()
    execution = runner.start_execution(DTIGEN_METADATA)
    cargs = []
    cargs.append("dtigen")
    cargs.extend(["-t", execution.input_file(tensor)])
    cargs.extend(["--s0", execution.input_file(s0)])
    cargs.extend(["-o", output_data])
    cargs.extend(["-r", execution.input_file(bvecs)])
    cargs.extend(["-b", execution.input_file(bvals)])
    cargs.extend(["-m", execution.input_file(brainmask)])
    if kurtosis is not None:
        cargs.extend(["--kurt", execution.input_file(kurtosis)])
    if help_:
        cargs.append("-h")
    ret = DtigenOutputs(
        root=execution.output_file("."),
        output_diffusion_data=execution.output_file(f"{output_data}.nii.gz"),
        output_kurtosis_map=execution.output_file(f"{pathlib.Path(kurtosis).name}", optional=True) if kurtosis is not None else None,
    )
    execution.run(cargs)
    return ret


__all__ = [
    "DTIGEN_METADATA",
    "DtigenOutputs",
    "dtigen",
]
