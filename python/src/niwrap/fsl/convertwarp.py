# This file was auto generated by Styx.
# Do not edit this file directly.

from styxdefs import *
import pathlib
import typing

CONVERTWARP_METADATA = Metadata(
    id="b47267c8d1e817208fd24edef0eaf0538481bf55",
    name="convertwarp",
    container_image_type="docker",
    container_image_index="index.docker.io",
    container_image_tag="mcin/docker-fsl:latest",
)


class ConvertwarpOutputs(typing.NamedTuple):
    """
    Output object returned when calling `convertwarp(...)`.
    """
    root: OutputPathType
    """Output root folder. This is the root folder for all outputs."""
    output_warp_file: OutputPathType
    """Output warp image"""


def convertwarp(
    output_warp: str,
    refvol: str,
    premat: str | None = None,
    warp1: str | None = None,
    midmat: str | None = None,
    warp2: str | None = None,
    postmat: str | None = None,
    shiftmap: str | None = None,
    shiftdir: str | None = None,
    jacobian: bool = False,
    jstats: bool = False,
    constrainj: bool = False,
    jmin: float | int | None = 0.01,
    jmax: float | int | None = 100.0,
    abs_: bool = False,
    rel: bool = False,
    absout: bool = False,
    relout: bool = False,
    verbose: bool = False,
    runner: Runner = None,
) -> ConvertwarpOutputs:
    """
    convertwarp by University of Oxford.
    
    Convert and combine FSL warp fields.
    
    More information: https://fsl.fmrib.ox.ac.uk
    
    Args:
        output_warp: Filename for output (warp) image - always in 'field'\
            format.
        refvol: Filename for reference image.
        premat: Filename of pre-affine transform.
        warp1: Filename for initial warp (follows pre-affine).
        midmat: Filename of mid-warp-affine transform.
        warp2: Filename for secondary warp (after initial warp, before\
            post-affine).
        postmat: Filename of post-affine transform.
        shiftmap: Filename for shiftmap (applied first).
        shiftdir: Direction to apply shiftmap {x,y,z,x-,y-,z-}.
        jacobian: Calculate and save Jacobian of final warp field.
        jstats: Print out statistics of the Jacobian of the warpfield.
        constrainj: Constrain the Jacobian of the warpfield to lie within\
            specified min/max limits.
        jmin: Minimum acceptable Jacobian value for constraint (default 0.01).
        jmax: Maximum acceptable Jacobian value for constraint (default 100.0).
        abs_: Use absolute warp convention (default): x' = w(x).
        rel: Use relative warp convention: x' = x + w(x).
        absout: Force output to use absolute warp convention: x' = w(x).
        relout: Force output to use relative warp convention: x' = x + w(x).
        verbose: Switch on diagnostic messages.
        runner: Command runner.
    Returns:
        NamedTuple of outputs (described in `ConvertwarpOutputs`).
    """
    runner = runner or get_global_runner()
    execution = runner.start_execution(CONVERTWARP_METADATA)
    cargs = []
    cargs.append("convertwarp")
    cargs.extend(["-o", output_warp])
    cargs.extend(["-r", refvol])
    if premat is not None:
        cargs.extend(["-m", premat])
    if warp1 is not None:
        cargs.extend(["-w", warp1])
    if midmat is not None:
        cargs.extend(["--midmat", midmat])
    if warp2 is not None:
        cargs.extend(["--warp2", warp2])
    if postmat is not None:
        cargs.extend(["--postmat", postmat])
    if shiftmap is not None:
        cargs.extend(["-s", shiftmap])
    if shiftdir is not None:
        cargs.extend(["-d", shiftdir])
    if jacobian:
        cargs.append("-j")
    if jstats:
        cargs.append("--jstats")
    if constrainj:
        cargs.append("--constrainj")
    if jmin is not None:
        cargs.extend(["--jmin", str(jmin)])
    if jmax is not None:
        cargs.extend(["--jmax", str(jmax)])
    if abs_:
        cargs.append("--abs")
    if rel:
        cargs.append("--rel")
    if absout:
        cargs.append("--absout")
    if relout:
        cargs.append("--relout")
    if verbose:
        cargs.append("-v")
    ret = ConvertwarpOutputs(
        root=execution.output_file("."),
        output_warp_file=execution.output_file(f"{output_warp}"),
    )
    execution.run(cargs)
    return ret


__all__ = [
    "CONVERTWARP_METADATA",
    "ConvertwarpOutputs",
    "convertwarp",
]
